<html>
<head>
<title>CARPE DIEM v2000.12.04 Development Notes</title>
<body bgcolor=#e0d0ff text-#000000>

<h1>Development Notes</h1>
<h3>CARPE DIEM v2000.12.04</h3>
<hr>
<p>

<h2>Caveats</h2>

<h3>Known Bugs</h3>

<p>Loading a saved game does not restore the entire game, only the
Region that the leader is currently in.

<h3>Gotchas</h3>

<p>Is not really a game yet.  Things may seem too hard, or too
easy.  Keybindings may seem awkward and are subject to change.

<p>Certainly storing the data for all Regions in Perl's perception of
the 'core' will stress virtual memory to inhuman extremes.

<p>Loading and saving the game are <b>slow</b> and produce <b>huge</b> saved-game files!
Plus there are bugs involved with loading a game.

<p>Mixing spells can result in unpredictable effects, such as
permanency of a spell effect.

<p>Travelling from one region to another, especially one filled
with a large amount of unpassable Terrain (such as ocean,) can cause
the character so travelling to become 'lost at sea.'

<h3>Operating Systems</h3>

<ul>
<li> Windows 98 and ActivePerl 5.6

<p>Arrow keys do not navigate.

<p>carpe.pl seems to run somewhat more quickly and smoothly when started
from the command line (start an MS-DOS prompt, then type 'perl
carpe.pl') instead of when double-clicking 'carpe.pl'.  Almost surely
a Windows/ActivePerl memory/console/performance setting thing.
<p>
<li>  FreeBSD (4.0-RELEASE) and Perl 5.005:

<p>Using a Video BIOS subsystem which uses a custom font on boot (such
as for displaying an "Energy Star compliant" logo) under FreeBSD may
make some on-screen characters look strange while playing the game,
because AFAICT FreeBSD doesn't reset the textmode font to the OEM one.

<p>The keystroke ^M cannot be bound (always results in ^J.)  This might
or might not apply under Linux and SCO as well.

</ul>

<h2>To-Do List</h2>

<ol>
<li>Reflex skills at thrown/fired weapons, shield use.
<li>Armour and weapons should occasionally be damaged.
<li>Implement the actions 'sleep', 'climb', 'run', 'yell'.
<li>Physical makeup in one list of adjectivals (for example 'Flesh'), damage type in another, seperate list of adjs (e.g. 'crushing'.)
<li>All attacks of items should be used/compared (look for: {melee_attacks}[0].) (two down)
<li>Encumbrance.  Should not be able to haul a dozen boulders around unless strength is near 40.
<li>Freshness of carcasses and other food.  Food preservation.
<li>Split party.  Join (merge) parties.
<li>Journal-keeping (quests & other important info) and view.
<li>Food, water, starvation, dehydration.
<li>Dieties, virtues, vows.
<li>Vehicular actors (horses, ships.)
<li>Load/Save World/Saveable object definately needs to be correctly implemented.
</ol>

<h2>History</h2>

<p>v2000.10.05

<ul>
<li> first public release
</ul>

<p>v2000.10.08

<ul>
<li> 7-bit ASCII set completed,
<li> 16 colour display under ANSI,
<li> Resistances to forces (slightly wrong, but there.)
<li> Regions created on-the-fly.
</ul>

<p>v2000.10.10

<ul>
<li> Default boilerplate for naming characters, parties.
<li> Regions border one another.
<li> Only able to see creatures nearby, not anywhere.
<li> Able to see nearby creatures attacking one another.
<li> Charm spell, adds monsters to your party
<li> How closely party members follow the leader
  depends on the leader's charisma
<li> Moved many world-dependent definitions into world/
</ul>

<p>v2000.10.12

<ul>
<li> Added Region generation style capability.
<li> Generation styles 'random', 'accretion', and 'recursive'.
<li> Fixed bug in Vandalize.
<li> Allows vandalizing whatever message you wish.
<li> Message on hitting edge of world (for now.)
<li> Food is identified upon consume.
<li> Equipment is identified upon wield.
<li> Item or Talent may be purveyor of hurt(),
  in which case there is no strength bonus (wand of lightning.)
<li> Letter shortcuts on menus.
<li> Handles ANSI arrow keys.  Double-click Escape to cancel menu.
</ul>

<p>v2000.10.15

<ul>
<li> Double-click Escape to bring up game menu (consistency.)
<li> Support for other-than-numberpad direction-pads (Rogue.)
<li> Adapted hmaon's AngRogue module into Angband_Roguelike keymap.
<li> Added escape key, long form (type "\move northwest" to try.)
<li> Added mostly-accurate keymaps for Rogue, Hack, and Larn.
<li> Arguments to actions - 'Move' menu now works (whee.)
<li> Ability to review previous 20-odd messages (usually bound to ^P.)
<li> Version synchronization in configuration file.
<li> Help screen prettied up ("* = unimplemented" now implemented.)
<li> Rudimentary support for supplementary materials.
<li> Support for each Region having it's own background music.
</ul>

<p>v2000.10.16

<ul>
<li> Fixed bugs under cygwin w.r.t. Win32 modules and POSIX (I hope.)
<li> Added 'canned' (pre-designed) region generation (Bakersport.)
<li> Cleaned up character display, esp. colors, esp. in Equipment
<li> Many body parts for wielded items (wear loincloth on head.)
<li> Nonweapon items (such as berries) can be used as weapons.
<li> Cleaned up Encounter code (no goto's) - might not crash under Perl 5.00x
</ul>

<p>v2000.10.20

<ul>
<li> Added dynamic dungeon creation (Giant Beehives, Dwarkling Hideouts.)
<li> Monsters can be unilaterally hostile towards the player's party.
<li> Extracted common code of Item, Terrain, Actor to Physical superclass.
<li> Migrated away from AUTOLOAD routines for sake of performance.
<li> Almost all world-definitions in world/ subdirectory.
<li> Re-aranged and extended Corona keymap.
<li> Actor incapacitated when any stat drops to 0.
<li> Message noting items on ground is not repeated during combat.
<li> Meaningful color used in character status display.
<li> Slightly more realistic experience reward (sum-of-stats.)
</ul>

<p>v2000.10.24

<ul>
<li> 'Attack' and 'Bash' unified.
<li> Each Terrain element is aware of it's coordinates and Region.
<li> Preferences configurable by menus: wield, actor, bump.
<li> Split engine (CARPE DIEM) from game universe (Corona.)
<li> Character now has lit seeing range of four squares.
<li> Speeded up Region generation (Terrain is cloned on-demand)
<li> Extended command introducer in keymap, ':' for ADOM.
<li> Fixed bugs which looked beyond edge of map:
  fleeing or following the leader, and searching.
<li> Talents are compared by name in Actor->has(talent).
<li> Key re-assignment while in game ("\bind M move north" to try.)
<li> 'impression' view added, used in 'look' at creature.
<li> Ability to switch party leader (TAB key.)
</ul>

<p>v2000.10.25

<ul>
<li> Seperated CARPE DIEM documentation from Corona documentation.
<li> Moved title screen and initial equipment from engine to game.
<li> Moved specific Encounter definitions from engine to game.
<li> Moved list of allowed PC races from engine to game.
<li> Different races have different randomly-generated names.
<li> Made delayed-usage talents safer under older Perl (5.005.)
<li> Made menu hackably configurable (menu/Corona.pm).
<li> Added ANSI arrow keys as fallback move commands.
<li> States 'blind deaf dumb confused paralyzed placid' reported.
<li> Bugs in armour fixed.
<li> Statistics now kept on average attack and defense scores.
<li> Incapacitation by stat reaching zero now works as expected.
</ul>

<p>v2000.10.27

<ul>
<li> Name creature now implemented, gives generic Actors proper names.
<li> Added 'dungeon' (rougelike) region generation.
<li> Added 'primate', 'bovine', 'porcine' symbols.
<li> Throw item implemented.  Arbitrary (crosshairs) aiming.
<li> Range determined by stength vs logarithmic weight.
<li> Item's projectile damage seperate from default damage. 
<li> Missiles bump off of obstacles and injure actors.
<li> Exploding missiles disappear after landing.
<li> Aerodynamics simulated with 'aeroweight' (may be higher or lower.)
<li> Fast, medium, or slow missile animation option.
<li> Establishing eval'ed on_xxx event methods: on_move, on_consume, etc.
<li> Bugs with searching fixed. %hidden hash replaced by on_reveal event.
<li> Slightly optimized Distribution objects (sorted upon creation.)
<li> Line-of-sight calculations for lighted actors.
</ul>

<p>v2000.10.30

<ul>
<li> Added dominant hand (right, left, ambidextrous) for humanoids.
<li> Displays character's appearance and dominant hand on roll screen.
<li> Player Character races described in roll screen.
<li> Cleaned up healing code.  All stats heal now, faster when resting.
<li> Cleaned up guild interface - single method class('class',level).
<li> Cleaned up talent code.  No effect hash, instead on_perform event.
<li> Object factory for scrolls etc ($item->enchant($talent).)
<li> Object factory for talents (Talent->create($terrain).)
<li> Object factory for magicked, finely crafted, cursed weapons.
<li> Charges on magical items such as wands is now tracked.
<li> Blindness (and insufficient light) now prevents:
  redrawing other actors, noting items and obstacles,
  looking around, reading and examining items.
<li> Added proficiency levels on talents, fixed learn method.
<li> Added lesson points, improving talents through practice.
<li> Added capturing souls in items.
<li> Fixed bug in message-displaying, now word wraps long messages.
<li> Actors only displayed when in line of sight of leader.
<li> Confused actors move randomly.  Blind NPC's act confused.
<li> Confusion prevents reading items.  Dumbness prevents reading scrolls.
<li> Dumbness prevents using talents with verbal components.
</ul>

<p>v2000.11.02

<ul>
<li> Added ::script routine for executing scripts in many languages.
<li> General-purpose Fuse objects.  Set up things to happen later.
<li> Material components for talents, which may or may not be consumed.
<li> $physical->seen() now uses format string (w/accusative etc.)
  Correct definate/indefinate articles/counts now.
<li> Missile weapons as ammunition (arrow->bow, bolt->X-bow, etc.)
  Launcher affects range and damage (not accuracy yet.)
<li> When dropping items, asks for how many to drop. Deprecates 'halve'.
<li> Help screen prettied up - better coloring and mnemonics.
<li> 'yank' now referred to as 'pull'.  on_pull event implemented.
<li> Different kinds of poisons and diseases with different effects.
<li> HTMLized documentation, added Object Model Reference document.
</ul>

<p>v2000.11.03

<ul>
<li> Added 'current' fuse method for Fuses object, modified in scripts.
<li> Added diseases which pass information back to the current fuse.
<li> Fixed bug w.r.t. combining items (needs to be looked at again)
<li> Fixed bug in drop (how many.)
<li> Fixed bug in posions (etc) which cause constitution to drop below
     zero; this actually results in death now, not just infinite
     incapacitation.
<li> Fixed bugs w.r.t. bashing and vandalizing terrain in the dark.
<li> Fixed bug allowing characters to jump out of bounds, beyond map.
<li> Fixed bug in line-of-sight determination for hostile Actors.
<li> Cleaned up $actor->death now displays messages, dispenses experience, etc.
<li> Moved 'hitbonus', 'on_strike', 'on_struck' to Physical object superclass.
<li> Moved 'los' to Physical object.  Cleaned up 'los' and 'seen'.
<li> Moved supplementary materials to game universe, not game engine.
</ul>

<p>v2000.11.05

<ul>
<li>Added 'wield by item' option.
<li>Wielded items can now cover many body parts, for
two-handed weapons and jackets with sleeves.
<li>Fixed bugs with removing talents under older (5.00x) Perl.
<li>Added 'Please wait' message before loading game module.
<li>Implemented 'interact' and 'trade_places' actions.
<li>Not-quite implemented 'sleep' and 'destroy_item' actions.
<li>Fixed bugs with line-of-sight for Items and Talents.
<li>Apropos messages when wielding and taking off items.
<li>Rudimentary support for adjusting both screen size and map size.
</ul>

<p>v2000.11.06

<ul>
<li>Adjectivals (Adj superclass of Physical and Force classes.)
<li>Routine to 'prep' newly created Actors, sexualizing them,
putting their main weapon in their dominant hand, and adjusting
for any magical benefits conferred from wielded items/armour.
<li>New on_open event allows opening and closing of doors and static containers
like chests.
<li>New on_enter and on_exit events on Terrain elements.
<li>New on_pickup event on Items allows for various boobytraps.
<li>Added 'coastline' Region generation algorithm.
<li>Terrain objects now support opacity (0% = fully transparent.)
<li>'make' constructor uses Adjectival table to determine new
defense value, weight, durability etc for Items.
<li>Fixed bugs in: Fuses object, Party view, Enter action, carcass
creation, initial belongings of Actors.
</ul>

<p>v2000.11.10

<ul>
<li>Physical objects handle composition (via condition, durability, hurt method.)
<li>Composition is expressed as a list of Adjectivals (which may imply other Adjectivals.)
<li>Attack object.  Support for multiple attacks (which cease
if the defender is killed), attacks which
can only be attempted if n previous attacks succeeded,
attacks which automatically succeed if n previous attacks succeeded,
on_strike event handler, individual identity (cloned) on attacks.
<li>$actor->choose_item takes a list of Adjectival objects as an 'OR'ed filter.
<li>Magic, cursed, written, edible, liquid,
type of instrument, and type of missile ammunition, are all Adjectivals.
<li>$actor->learn improves, degrades, and removes Talents, as well as acquiring them.
<li>Ambidextrous characters are able to switch stance (switch_stance action).
<li>Report of Items seen on Terrain square now in single message.
<li>Full or short body part menu in wield.  Body parts always have same letters in full menu.
    Short menu only shows body parts which are vacant.
<li>Implemented 'push' and 'destroy_item' actions.
<li>Resistances can be specified with Adjectivals.
<li>$physical->alter_resistances does for Resistances what learn does for Talents.
<li>Cleaned up message display (erased when no messages pending that turn.)
<li>Actors can dodge missiles (5%/DEX point, sliding, no automatic successes.)
<li>The make() constructor, now located in the Physical class, bestows resistances from Adjectivals.
<li>Smarter NPC's don't attack each other when blocked from their target.
<li>Reworked supplementary materials interface, uses web browser and connects to
    IP network to retrieve multimedia objects (images, music, etc.)
<li>Supplementary materials, keymap, and location of web browser are preferences,
    not configuration options.
<li>Ability to save preferences to user prefs file added.
<li>New action 'repeat_action' (bound to '.' in the Corona keymap) repeats an action until
    the leader notices something new.
<li>Added sentinel to detect when 100 moves have passed with no user input, pops up a
    menu to ask what to do (needed to handle otherwise infinite loops caused by repeat.)
<li>Explosion, fire, cold damage etc, are not subject to strength bonus, only crushing, cutting, and piercing (kinetic attacks).
<li>Character background influences initial equipment, belongings, talents, and
start location.
<li>Added Curses display abstraction, requires Curses for Perl module be installed.
<li>Clear to EOL and refresh display interfaces in virtual console.
<li>Created SemiOEM symbolset for SCO Unix and Curses (can't display ASCII < 32.)
</ul>

<p>v2000.11.12

<ul>
<li>Fixed bugs in automatically creating two-way portals back from newly-created dungeons.
<li>Fixed bugs in tombstone-drawing routine and Win32 clreol routine.
<li>Encounter -> Buy Services.  Added support for guilds and training.
<li>Encounter -> Sell Items.  Encounter -> Bribe.
<li>Fixed fleeing encounter, getting away, getting initiative
    if situation decays into combat.
<li>Encounter -> Negotiate logic for individual creatures.
<li>Monogrammed items which are forced to always show up with a given letter in menus.
<li>Menu object w/erase background, etc which supports the above.
<li>Boolean passed to 'put_on' that redirects to 'take' if Actor already has one on.
<li>Improved reviewing previous messages.  Added Messages view.  View meta-action takes arguments.
<li>Fixed small bugs in help screen and cloning items.
<li>Better redirection of actions (esp. move -> interact and bash) on bump.
</ul>

<p>v2000.11.19

<ul>
<li>Added color to Curses display abstraction, made initial setup easier (default abstraction is Curses if it's installed.)
<li>Fixed bugs in redirection of 'move' w.r.t. travelling from Region to Region.
<li>Added 'freeze channels' to Fuses so that magic can progress in orderly fashion.
<li>Hostile creatures and party members now pursue their targets/leaders from Region to Region.
<li>Implemented View Guilds, shows ranking attained in each guild.
<li>$physical->throw routine supplies animation for both weapons and spells.
<li>NPC's fall asleep, wake up, and do not move when sleeping.
<li>Improved armour system for realism (coverage factors.)
</ul>

<p>v2000.12.04

<ul>
<li>Allowed for recharging talents (creature "once per day" type talents, magic artefacts)
<li>Diseased and poisoned terrain floors are now a constructor.
<li>Terrain squares use adjectivals for composition.  'water' field on Terrain objects replaced with adjectival.
<li>Movement through terrain is now relative to actor's aquatic, airborne, or ethereal nature.
<li>Fixed bugs w.r.t. cloning talents upon Actor prep.
<li>on_consider event on Talent objects allows for smarter choice of talents by creatures.
<li>Tracking of game time in Party view.
<li>Better portrayal of confusion, affects moving, attacking, interacting, and looking around more thoroughly.
<li>Support for unique Actors, Items, and Terrain squares during Region generation.
<li>Talents with moves greater than zero (e.g. calisthenics) no longer automatically succeed.
<li>When a party member dies, it is now removed from the party roster.
<li>Absolutely-trapped party members following leader no longer cause game to hang.
<li>Automatically-created 'dungeon' levels now have more apropos exits (not always ascending staircases.)
<li>Reflex skills such as proficiency at melee weapons and armour use (cover head etc).
<li>Fixed bugs in armour coverage roll.
<li>Added rudimentary 'Save World' and 'Load World' functionalities.
</ul>

</body>
</html>
